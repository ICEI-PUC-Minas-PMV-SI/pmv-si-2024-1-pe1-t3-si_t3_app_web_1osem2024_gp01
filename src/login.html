<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Meta tags para descrever o documento -->
    <meta name="description"
        content="Plataforma de gestão centralizada para aplicações de negócios, incluindo CRM, API e processos.">
    <meta name="author" content="SI_T03_GP01">
    <title>Login | HubSolutions</title>
    <!-- Ícone da página -->
    <link rel="shortcut icon" href="imgs/ico-hubsolutions.ico" type="ico-hubsolutions">
    <!-- Estilos globais -->
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/login.css">
</head>

<body>

    <header>
        <!-- Logo -->
        <div id="logo-hub">
            <img src="imgs/logo-hubsolutions.png" alt="logo-hubsolutions">
        </div>
        <!-- Título -->
        <div class="hub-titulo">
            <h1>HubSolutions</h1>
        </div>

    </header>
    <main>
        <!-- Caixa de Login -->
        <div class="caixa-login">
            <!-- Descrição -->
            <p>A criação de um hub que centraliza informações de diversas aplicações em um único local proporciona uma
                maneira mais eficiente de visualizar todos os dados e oferecer um controle ampliado sobre os processos
                de forma geral.</p>
            <!-- Formulário de Login -->
            <form action="#">
                <div class="input-dados">
                    <input type="email" id="email" placeholder="name@email.com" required>
                </div>
                <div class="input-dados">
                    <input type="password" id="password" placeholder="********" required>
                </div>
                <div class="botao">
                    <button id="iniciar">Iniciar</button>
                </div>
            </form>

            <script>
                const iniciar = document.getElementById('iniciar');
                const emailInput = document.getElementById('email');
                const passwordInput = document.getElementById('password');

                iniciar.addEventListener('click', function(event) {
                  event.preventDefault();

                const email = emailInput.value;
                const password = passwordInput.value;

                    // Verifica se há algum usuário cadastrado
                let userFound = false;
  
                    // Itera pelos itens do localStorage para encontrar o usuário com o email
                for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('userData-')) { 
                    // Verifica se a chave começa com 'userData-'
                const userDataString = localStorage.getItem(key);
                const userData = JSON.parse(userDataString);
                if (userData.email === email) {
                    // Validação
                if (password === userData.password) {
                    // Redireciona para a próxima página
                    window.location.href = 'main_page.html';
                    userFound = true;
                    break;
                      } else {
                        alert('Email ou senha inválidos!');
                        userFound = true;
                        break;
                      }
                    }
                  }
                }

                // Se o usuário não foi encontrado
                if (!userFound) {
                  alert('Nenhum usuário cadastrado com esse email!');
                }
                });

            </script>

            <!-- Botões adicionais -->
            <div class="botoes">
                <button id="recover" onclick="window.location.href='recover.html'">Esqueci a senha</button>
                <button id="registro" onclick="window.location.href='registro.html'">Cadastre-se</button>
            </div>

            
        </div>
    </main>
    <footer>
        <!-- Logotipo e texto do Git -->
        <a class= "link" href="https://github.com/ICEI-PUC-Minas-PMV-SI/pmv-si-2024-1-pe1-t3-si_t3_app_web_1osem2024_gp01" target="_blank">   
        <img src="imgs/logo-git.png" alt="logo-git">
        <img src="imgs/texto-git.png" alt="texto-git">
        </a>
    </footer>
</body>

</html>